package: com.fleet.products
imports:
  - com.fleet.common
  - com.fleet.cargo
types:
  objects:
    Product:
      docs: |
        Products are the individual assets to be deployed to the deployment (ship)
      builder: true
      fields:
        frn: common.ProductFrn
        name: string
        namespace: string
        createdAt: datetime
        modifiedAt: datetime
    CreateProductRequest:
      fields:
        name: string
        namespace: optional<string>
    ListProductResponse:
      builder: true
      fields:
        count: int
        total: int
        items: list<Product>

services:
  ProductService:
    base-path: /api/v1/products
    endpoints:
      listProducts:
        http: GET /
        docs: list all products
        args:
          query: 
            offset: optional<long>
            pageSize: optional<long>
        returns: ListProductResponse
      createProduct:
        http: POST /
        docs: creates a new product
        args:
          body: CreateProductRequest
        returns: Product
      getProduct:
        http: GET /{productFrn}
        docs: get single product
        args:
          path:
            productFrn: string
        returns: Product
      getCargo:
        http: GET /{productFrn}/cargo
        docs: get all installations of a product
        args:
          path:
            productFrn: string
        returns: list<cargo.Cargo>