package: com.fleet.ships
imports:
  - com.fleet.common
  - com.fleet.cargo
types:
  objects:
    Ship:
      builder: true
      fields:
        frn: common.ShipFrn
        name: string
        namespace: string
        createdAt: datetime
        modifiedAt: datetime
    CreateShipRequest:
      fields:
        name: string
        namespace: optional<string>
    ListShipsResponse:
      builder: true
      fields:
        count: int
        total: int
        items: list<Ship>

services:
  ShipService:
    base-path: /api/v1/ships
    endpoints:
      listShips:
        http: GET /
        docs: list all ships
        args:
          query: 
            offset: optional<long>
            pageSize: optional<long>
        returns: ListShipsResponse
      getShip:
        http: GET /{shipFrn}
        docs: get single ship
        args:
          path:
            shipFrn: string
        returns: Ship
      createShip:
        http: POST /
        docs: creates a new ship
        args:
          body: CreateShipRequest
        returns: Ship
      getCargo:
        http: GET /{shipFrn}/cargo
        docs: get all installations
        args:
          path:
            shipFrn: string
        returns: list<cargo.Cargo>